sudo: required
services:
  - docker
language: node_js
node_js: 10
branches:
  only:
    - master
install:
  - yarn install
script:
  - yarn run docs:build
  - docker build -t jolylai/notebook-js .
  - docker login -u $DOCKER_NAME -p $DOCKER_PASSWORD
  - docker push jolylai/notebook-js
deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN
  keep-history: true
  local_dir: docs/.vuepress/dist
  on:
    branch: master
